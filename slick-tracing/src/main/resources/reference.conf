# Reference configuration for Slick Distributed Tracing
# This file contains the default configuration values for the slick-tracing module

slick {
  tracing {
    # Enable or disable distributed tracing
    enabled = false
    
    # Query execution tracing configuration
    query-execution {
      # Enable tracing of query execution
      enabled = true
      
      # Include parameter values in traces (WARNING: may expose sensitive data)
      include-parameters = false
      
      # Include result set metadata in traces
      include-resultset-metadata = true
      
      # Enable connection pool metrics
      connection-pool-metrics = true
      
      # Enable streaming query metrics
      streaming-metrics = true
    }
    
    # Query compilation tracing configuration
    query-compilation {
      # Enable tracing of query compilation phases
      enabled = true
      
      # Include detailed phase information
      include-phase-details = false
      
      # Include AST details in traces (WARNING: may impact performance)
      include-ast-details = false
      
      # Enable performance metrics for compilation phases
      performance-metrics = true
    }
    
    # SQL comment injection configuration
    sql-comments {
      # Enable SQL comment injection
      enabled = true
      
      # Include OpenTelemetry trace context in SQL comments
      include-trace-context = true
      
      # Include application tags in SQL comments
      include-application-tags = true
      
      # Custom tags to include in all SQL comments
      custom-tags {
        # Example: environment = "production"
      }
      
      # SQL comment format: "standard", "google-cloud-sql", "aws-aurora", "azure-sql"
      format = "standard"
    }
    
    # Query sanitization configuration
    sanitization {
      # Enable SQL statement sanitization
      enabled = true
      
      # Sanitize parameter values (replace with placeholders)
      sanitize-parameters = true
      
      # Sanitize SQL statements (replace literals with placeholders)
      sanitize-statements = true
      
      # Include query summary in traces
      include-query-summary = true
      
      # Maximum length of SQL statements in traces
      max-statement-length = 1000
    }
    
    # Performance and resource configuration
    performance {
      # Sampling rate for traces (0.0 to 1.0, where 1.0 means trace everything)
      sampling-rate = 1.0
      
      # Maximum number of spans per trace
      max-spans-per-trace = 100
      
      # Enable asynchronous span processing
      async-processing = true
      
      # Buffer size for asynchronous processing
      buffer-size = 1000
    }
    
    # Cloud database integration configuration
    cloud-integration {
      # Google Cloud SQL configuration
      google-cloud-sql {
        # Enable Google Cloud SQL specific features
        enabled = false
        
        # Google Cloud project ID
        project-id = null
        
        # Cloud SQL instance ID
        instance-id = null
        
        # Enable Query Insights integration
        query-insights = true
      }
      
      # AWS Aurora configuration
      aws-aurora {
        # Enable AWS Aurora specific features
        enabled = false
        
        # Aurora cluster identifier
        cluster-identifier = null
        
        # Enable Performance Insights integration
        performance-insights = true
      }
      
      # Azure SQL configuration
      azure-sql {
        # Enable Azure SQL specific features
        enabled = false
        
        # Azure SQL server name
        server-name = null
        
        # Enable Query Store integration
        query-store = true
      }
    }
  }
}

# OpenTelemetry configuration (optional)
# These settings are used by the OpenTelemetry SDK if present
otel {
  # Service name for tracing
  service.name = "slick-application"
  
  # Instrumentation configuration
  instrumentation {
    # JDBC instrumentation settings
    jdbc {
      enabled = true
      statement-sanitizer.enabled = true
    }
  }
  
  # Resource attributes
  resource.attributes {
    service.name = "slick-application"
    service.version = "1.0.0"
  }
}